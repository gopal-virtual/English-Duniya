<ion-pane class="bg-brand">
  <div class="bar bar-header bar-transparent">
    <a ui-sref="user.main.home" class="button button-clear button-icon icon ion-ios-close-empty"></a>
    <div class="h1 title color-stable">Q {{quizCtrl.getCurrentIndex()+1}} / {{quizCtrl.quiz.questions.length}}</div>
    <button class="button button-clear">HINT</button>
  </div>
  <ion-content class="has-header has-footer padding-x-20">
    <div ng-repeat="question in quizCtrl.quiz.questions" ng-if="quizCtrl.isCurrentIndex($index)" ng-class="{'animation-question-slide':quizCtrl.isCurrentIndex($index)}">
      <div class="card card-transparent center" ng-click="quizCtrl.playAudio(question.info.audio.key)">
        <p >
        <strong class="text-white" ng-if="question.info.title">{{question.info.title}}</strong>
        </p>
        <div ng-if="question.info.image.key"><img ng-src="{{'img/quiz/1.jpg'}}"></div>
        <div ng-if="!question.info.title && !question.info.image.key"><img height="100" width="100" ng-src="img/speaker.png"> </div>
      </div>
      <!-- SCQ -->
      <div class="center">
        <label class="list card padding inline-flex" ng-if="question.info.content_type=='choice question' && !question.info.question_type.is_multiple" ng-repeat="option in question.info.choices" ng-click="quizCtrl.playAudio(option.audio.key)"  ng-class="{'wrong-attempt':quizCtrl.isAttempted(question.info.id) && quizCtrl.isKeyAttempted(question,option.key) && !quizCtrl.isKeyCorrect(question,option.key),'correct-attempt': quizCtrl.isAttempted(question.info.id) && quizCtrl.isKeyAttempted(question,option.key) && quizCtrl.isKeyCorrect(question,option.key),'selected':option.key==question.attempted}">
          <input class="hide" type="radio" ng-model="question.attempted" ng-value="option.key" ng-disabled="quizCtrl.isCorrectAttempted(question)">
          <div ng-if="option.option">{{option.option}}</div>
          <div ng-if="option.image.key"><img ng-src="{{'img/quiz/1.jpg'}}"></div>
          <div ng-if="!option.option && !option.image.key"><img height="100" width="100" ng-src="img/speaker.png"> </div>
        </label>
      </div>

       <!-- MCQ options -->
      <label ng-if="question.info.content_type=='choice question' && question.info.question_type.is_multiple" ng-repeat="option in question.info.question_type.choices" class="list card padding block" ng-class="{'wrong-attempt':quizCtrl.isAttempted(question.info.id) && quizCtrl.isKeyAttempted(question,option.key) && !quizCtrl.isKeyCorrect(question,option.key),'correct-attempt': quizCtrl.isAttempted(question.info.id) && quizCtrl.isKeyAttempted(question,option.key) && quizCtrl.isKeyCorrect(question,option.key),'selected':question.attempted[option.key]}">
        <input class="hide" type="checkbox" ng-model="question.attempted[$index+1]" ng-value="option.key" ng-disabled="quizCtrl.isCorrectAttempted(question)">
        <div ng-if="option.option">{{option.option}}</div>
        <div ng-if="option.image.key"><img ng-src="{{'img/quiz/1.jpg'}}"></div>
        <div ng-if="!option.option && !option.image.key"><img height="100" width="100" ng-src="img/speaker.png"> </div>
      </label>
    </div>
    <audio id="audioplayer">
      <source id="audioSource" type="audio/mpeg">
    </audio>
  </ion-content>
  <div class="bar bar-footer bar-transparent">
    <div class="button-bar">
      <a class="button button-clear" ng-click="quizCtrl.prevQuestion()">
        <i class="icon ion-ios-arrow-back"></i>
      </a>
      <button class="button button-calm" ng-click="quizCtrl.decide()" ng-disabled="!quizCtrl.canSubmit()">
        {{quizCtrl.isCorrectAttempted(quizCtrl.quiz.questions[quizCtrl.currentIndex]) ? quizCtrl.currentIndex < quizCtrl.quiz.questions.length - 1 ? 'CONTINUE' : 'DONE' : 'SUBMIT'}}
      </button>
      <a class="button button-clear" ng-click="quizCtrl.nextQuestion()">
        <i class="icon ion-ios-arrow-forward"></i>
      </a>
    </div>

  </div>


</ion-pane>
