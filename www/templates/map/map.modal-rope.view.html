<ion-modal-view ng-class="{'modal-transparent': lessonutils.isState('map.navigate'), 'modal-dark': !lessonutils.isState('map.navigate')}" >
    <ion-content ng-init="mapCtrl.selected=false" scroll="false">
        <div class="padding-x-20">
            <div class="rope-modal-title">
                <h5 class="margin-0 padding-y-10 padding-x-20 text-center">{{selectedNode.node.title.split('-', 2).join('-');}}</h5>
            </div>
            <div class="rope-menu-avatar avatar animation-delay-more animation-fade-in-from-left" style="background:url('img/assets/avatar-{{lessonutils.getGender()=='M'? 'boy' : 'girl'}}.png') no-repeat center center; background-size : auto 100%"></div>
            <div class="rope-double-menu top-block" >
                <div ng-repeat="resource in selectedNode.objects" class="rope-menu-item bevel text-center capitalize" ng-hide="lessonutils.resourceType(resource)=='assessment'" ng-init="lessonutils.resourceType(resource)=='practice'?(step = 4):lessonutils.resourceType(resource)=='video'?(step = 2):(step = -1)" ng-class="{'brightness-50': lessonutils.demoFactory.getStep()!=5 && !lessonutils.canClickDemo(resource) }">
                    <h4 style="padding-bottom: 0px !important;" class="color-white text-center padding-y-10 margin-0">{{lessonutils.resourceType(resource)}}</h4>
                    <img ng-src="{{lessonutils.getIcon(resource)}}" alt="resource icon" ng-click="(lessonutils.canClickDemo(resource) || lessonutils.demoFactory.getStep() == 5) && closeNodeMenu();$event.stopPropagation();lessonutils.playResource(resource,contentCtrl.API,mapCtrl.animationExpand.shrink)" class="" style="-webkit-animation-delay : {{($index+3)*100}}ms;" ng-class="{'brightness-50':lessonutils.currentState(resource),'animation-repeat-bounce': lessonutils.demoFactory.getStep()!=5 && lessonutils.canClickDemo(resource),'animation-zoom-in': !lessonutils.canClickDemo(resource)}" />
                    <span style="" class="badge badge-assertive badge-score">{{lessonutils.getLocalLesson().score[resource.node.id].score}}</span>
                    <button ng-show="lessonutils.currentState(resource)" ng-disabled=" lessonutils.demoFactory.getStep() != 5 && !lessonutils.canClickDemo(resource)" ng-click="audio.play('press');quizCtrl.interval && quizCtrl.startTimer();contentCtrl.API && contentCtrl.play();lessonutils.playResource(resource,contentCtrl.API);closeNodeMenu();" class="button button-balanced button-round font-md button-resume animation-zoom-in" style="line-height: 30px !important;-webkit-animation-delay : {{($index+3)*100}}ms;">resume</button>
                </div>
            </div>

        </div>
        <div class="row" >
            <div class="col text-center padding" id="step1">
                <button style="min-height:40px;height: 40px;" ng-disabled="lessonutils.demoShown &&  lessonutils.demoFactory.getStep() != 5" ng-class="{'brightness-50':lessonutils.demoShown && lessonutils.demoFactory.getStep() != 3 && lessonutils.demoFactory.getStep() != 5}" class="button button-balanced button-round font-md animation-delay-more animation-fade-in-from-bottom padding-x-40" ng-click="audio.play('press');audio.setVolume('background', 0.4);mapCtrl.animationExpand.shrink();closeNodeMenu();lessonutils.leaveLesson();mapCtrl && mapCtrl.resetNode();lessonutils.demoFactory.getStep() == 3 && lessonutils.demoFactory.setStep(4)">Leave Lesson</button>
            </div>
        </div>

    </ion-content>
</ion-modal-view>

<!--  -->
